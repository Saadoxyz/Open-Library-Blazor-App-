@page "/"
@page "/home"
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime

<div class="library-container">
    <!-- Header Navigation -->
    <header class="header">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="logo d-flex align-items-center">
                <span class="badge bg-primary rounded-pill me-2">OPEN</span>
                <span class="logo-text">LIBRARY</span>
            </div>

            <div class="nav-controls d-flex align-items-center">
                <a href="#" class="nav-link me-3">My Books</a>

                <div class="dropdown me-3">
                    <button class="btn btn-light dropdown-toggle" type="button" id="browseDropdown" data-bs-toggle="dropdown">
                        Browse
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="browseDropdown">
                        <li><a class="dropdown-item" href="#">Fiction</a></li>
                        <li><a class="dropdown-item" href="#">Non-Fiction</a></li>
                        <li><a class="dropdown-item" href="#">Bestsellers</a></li>
                    </ul>
                </div>

                <div class="search-box d-flex me-3">
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="allDropdown" data-bs-toggle="dropdown">
                            All
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="allDropdown">
                            <li><a class="dropdown-item" href="#">Title</a></li>
                            <li><a class="dropdown-item" href="#">Author</a></li>
                            <li><a class="dropdown-item" href="#">ISBN</a></li>
                        </ul>
                    </div>
                    <input type="text" class="form-control" placeholder="Search" />
                    <button class="btn btn-outline-secondary" type="button">
                        <i class="bi bi-search"></i>
                    </button>
                </div>

                <div class="auth-buttons">
                    <a href="#" class="btn btn-link">Log In</a>
                    <a href="#" class="btn btn-primary">Sign Up</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container main-content">
        <!-- Welcome Section -->
        <section class="welcome-section">
            <h5 class="welcome-title">Welcome to Open Library</h5>

            <div class="features-carousel">
                <div class="carousel-controls">
                    <button class="carousel-control-prev">
                        <span class="carousel-control-prev-icon"></span>
                    </button>
                </div>

                <div class="features-container">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://openlibrary.org/static/images/categories/ebooks.svg" alt="E-books icon" />
                        </div>
                        <h6 class="feature-title">Read Free Library Books Online</h6>
                        <p class="feature-description">Millions of books available in controlled digital lending</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://openlibrary.org/static/images/categories/reading-goal.svg" alt="Calendar icon" />
                        </div>
                        <h6 class="feature-title">Set a Yearly Reading Goal</h6>
                        <p class="feature-description">Learn how to set a yearly reading goal and track what you read</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://openlibrary.org/static/images/categories/reading-log.svg" alt="Bookmark icon" />
                        </div>
                        <h6 class="feature-title">Keep Track of your Favorite Books</h6>
                        <p class="feature-description">Organize your books using Lists & the Reading Log</p>
                    </div>
                </div>

                <div class="carousel-controls">
                    <button class="carousel-control-next">
                        <span class="carousel-control-next-icon"></span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Trending Books Section -->
        <section class="trending-section">
            <h5 class="trending-title">Trending Books</h5>

            <div class="books-carousel">
                <div class="carousel-controls">
                    <button class="carousel-control-prev">
                        <span class="carousel-control-prev-icon"></span>
                    </button>
                </div>

                <div class="books-container">
                    @foreach (var book in trendingBooks)
                    {
                        <div class="book-card">
                            <div class="book-cover">
                                <img src="@book.ImageUrl" alt="@book.Title" />
                            </div>
                            <div class="book-status @book.StatusClass">
                                @book.Status
                            </div>
                        </div>
                    }
                </div>

                <div class="carousel-controls">
                    <button class="carousel-control-next">
                        <span class="carousel-control-next-icon"></span>
                    </button>
                </div>
            </div>
        </section>
    </main>
</div>

<style>
    /* Main Container */
    .library-container {
        font-family: Arial, sans-serif;
        background-color: #f5f3e8;
        min-height: 100vh;
    }

    /* Header Styles */
    .header {
        background-color: #fff;
        padding: 10px 0;
        border-bottom: 1px solid #ddd;
    }

    .logo .badge {
        font-size: 10px;
        padding: 5px;
    }

    .logo-text {
        font-weight: bold;
        font-size: 18px;
        letter-spacing: 1px;
    }

    .nav-link {
        color: #333;
        text-decoration: none;
    }

    .search-box {
        display: flex;
        align-items: center;
    }

        .search-box input {
            border-left: none;
            border-right: none;
        }

    /* Main Content Styles */
    .main-content {
        padding: 20px 0;
    }

    /* Welcome Section */
    .welcome-section {
        background-color: #fff;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid #ddd;
    }

    .welcome-title {
        margin-bottom: 15px;
        color: #333;
    }

    .features-carousel {
        display: flex;
        align-items: center;
    }

    .features-container {
        display: flex;
        flex: 1;
        justify-content: space-between;
    }

    .feature-card {
        text-align: center;
        padding: 10px;
        width: 33%;
    }

    .feature-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #ddd;
        border-radius: 5px;
    }

        .feature-icon img {
            max-width: 60px;
            max-height: 60px;
        }

    .feature-title {
        font-size: 14px;
        margin-bottom: 5px;
    }

    .feature-description {
        font-size: 12px;
        color: #666;
    }

    /* Trending Books Section */
    .trending-section {
        margin-bottom: 20px;
    }

    .trending-title {
        margin-bottom: 15px;
        color: #333;
    }

    .books-carousel {
        display: flex;
        align-items: center;
    }

    .books-container {
        display: flex;
        flex: 1;
        justify-content: space-between;
        gap: 15px;
    }

    .book-card {
        width: 16.666%;
    }

    .book-cover {
        height: 200px;
        overflow: hidden;
        margin-bottom: 5px;
    }

        .book-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

    .book-status {
        text-align: center;
        padding: 5px;
        font-size: 12px;
        color: white;
        border-radius: 2px;
    }

    .status-not-in-library {
        background-color: #6c757d;
    }

    .status-checked-out {
        background-color: #6c757d;
    }

    .status-preview-only {
        background-color: #0d6efd;
    }

    /* Carousel Controls */
    .carousel-controls button {
        background: none;
        border: none;
        cursor: pointer;
    }

    .carousel-control-prev-icon,
    .carousel-control-next-icon {
        display: inline-block;
        width: 20px;
        height: 20px;
        background-color: #aaa;
        border-radius: 50%;
        background-size: 60%;
        background-position: center;
        background-repeat: no-repeat;
    }

    .carousel-control-prev-icon {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 8 8'%3e%3cpath d='M5.25 0l-4 4 4 4 1.5-1.5L4.25 4l2.5-2.5L5.25 0z'/%3e%3c/svg%3e");
    }

    .carousel-control-next-icon {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 8 8'%3e%3cpath d='M2.75 0l-1.5 1.5L3.75 4l-2.5 2.5L2.75 8l4-4-4-4z'/%3e%3c/svg%3e");
    }
</style>

@code {
    private List<BookModel> trendingBooks = new List<BookModel>
    {
        new BookModel
        {
            Title = "Control Master",
            ImageUrl = "https://covers.openlibrary.org/b/id/12860759-M.jpg",
            Status = "Not in Library",
            StatusClass = "status-not-in-library"
        },
        new BookModel
        {
            Title = "La Ruota del Tempo",
            ImageUrl = "https://covers.openlibrary.org/b/id/8579242-M.jpg",
            Status = "Checked Out",
            StatusClass = "status-checked-out"
        },
        new BookModel
        {
            Title = "Court of Mist and Fury",
            ImageUrl = "https://covers.openlibrary.org/b/id/12726641-M.jpg",
            Status = "Preview Only",
            StatusClass = "status-preview-only"
        },
        new BookModel
        {
            Title = "Rich Dad Poor Dad",
            ImageUrl = "https://covers.openlibrary.org/b/id/8269956-M.jpg",
            Status = "Not in Library",
            StatusClass = "status-not-in-library"
        },
        new BookModel
        {
            Title = "Game of Thrones",
            ImageUrl = "https://covers.openlibrary.org/b/id/13052477-M.jpg",
            Status = "Checked Out",
            StatusClass = "status-checked-out"
        },
        new BookModel
        {
            Title = "Shadow and Bone",
            ImageUrl = "https://covers.openlibrary.org/b/id/12767977-M.jpg",
            Status = "Checked Out",
            StatusClass = "status-checked-out"
        }
    };

    protected override async Task OnInitializedAsync()
    {
        // You could load data from a service here
        await base.OnInitializedAsync();
    }

    private async Task HandleBookClick(BookModel book)
    {
        await JSRuntime.InvokeVoidAsync("alert", $"You selected: {book.Title}");
        // Navigate to book details page
        // NavigationManager.NavigateTo($"/books/{book.Id}");
    }

    public class BookModel
    {
        public string Title { get; set; }
        public string ImageUrl { get; set; }
        public string Status { get; set; }
        public string StatusClass { get; set; }
    }
}